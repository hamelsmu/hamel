<a href="../../index.html" class="navbar-brand navbar-brand-logo"><img
src="../../quarto.png" class="navbar-logo" alt="Quarto logo." /></a>

<span class="navbar-toggler-icon"></span>

-   <a href="../../index.html" class="nav-link"><span
    class="menu-text">Overview</span></a>
-   <a href="../../docs/get-started/index.html" class="nav-link"><span
    class="menu-text">Get Started</span></a>
-   <a href="../../docs/guide/index.html" class="nav-link"><span
    class="menu-text">Guide</span></a>
-   <a href="../../docs/extensions/index.html" class="nav-link active"
    aria-current="page"><span class="menu-text">Extensions</span></a>
-   <a href="../../docs/reference/index.html" class="nav-link"><span
    class="menu-text">Reference</span></a>
-   <a href="../../docs/gallery/index.html" class="nav-link"><span
    class="menu-text">Gallery</span></a>
-   <a href="../../docs/blog/index.html" class="nav-link"><span
    class="menu-text">Blog</span></a>
-   <a href="#" id="nav-menu-help" class="nav-link dropdown-toggle"
    role="button" data-bs-toggle="dropdown" aria-expanded="false"><span
    class="menu-text">Help</span></a>
    -   <a href="https://github.com/quarto-dev/quarto-cli/issues"
        class="dropdown-item"><em></em> <span class="dropdown-text">Report a
        Bug</span></a>
    -   <a href="https://github.com/quarto-dev/quarto-cli/discussions"
        class="dropdown-item"><em></em> <span class="dropdown-text">Ask a
        Question</span></a>
    -   <a href="../../docs/faq/index.html" class="dropdown-item"><em></em>
        <span class="dropdown-text">FAQ</span></a>

<a href="https://twitter.com/quarto_pub"
class="quarto-navigation-tool px-1" aria-label="Quarto Twitter"
title="Quarto Twitter"><em></em></a>
<a href="https://github.com/quarto-dev/quarto-cli"
class="quarto-navigation-tool px-1" aria-label="Quarto GitHub"
title="Quarto GitHub"><em></em></a>
<a href="https://quarto.org/docs/blog/index.xml"
class="quarto-navigation-tool px-1" aria-label="Quarto Blog RSS"
title="Quarto Blog RSS"><em></em></a>

1.  [Creating Extensions](../../docs/extensions/creating.html)
2.  [Custom Formats](../../docs/extensions/formats.html)

<span class="flex-grow-1" role="button" bs-toggle="collapse"
bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar"
aria-expanded="false" aria-label="Toggle sidebar navigation"
onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"></span>

-   

    ------------------------------------------------------------------------

-   <a href="../../docs/extensions/index.html"
    class="sidebar-item-text sidebar-link"><span class="menu-text">Quarto
    Extensions</span></a> <span class="sidebar-item-toggle text-start"
    bs-toggle="collapse" bs-target="#quarto-sidebar-section-1"
    aria-expanded="true" aria-label="Toggle section"></span>

    -   <a href="../../docs/extensions/listing-filters.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Shortcodes &amp; Filters</span></a>

    -   <a href="../../docs/extensions/listing-journals.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Journal
        Articles</span></a>

    -   <a href="../../docs/extensions/listing-formats.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Custom
        Formats</span></a>

    -   <a href="../../docs/extensions/listing-revealjs.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Revealjs
        Extensions</span></a>

    -   <a href="../../docs/extensions/managing.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Managing
        Extensions</span></a>

-   

    ------------------------------------------------------------------------

-   <a href="../../docs/extensions/creating.html"
    class="sidebar-item-text sidebar-link"><span class="menu-text">Creating
    Extensions</span></a> <span class="sidebar-item-toggle text-start"
    bs-toggle="collapse" bs-target="#quarto-sidebar-section-2"
    aria-expanded="true" aria-label="Toggle section"></span>

    -   <a href="../../docs/extensions/creating.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Overview</span></a>

    -   <a href="../../docs/extensions/lua.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Lua
        Development</span></a>

    -   <a href="../../docs/extensions/lua-api.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Lua API
        Reference</span></a>

    -   <a href="../../docs/extensions/distributing.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Distribution</span></a>

    -   

        ------------------------------------------------------------------------

    -   <a href="../../docs/extensions/shortcodes.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Shortcodes</span></a>

    -   <a href="../../docs/extensions/filters.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Filters</span></a>

    -   <a href="../../docs/journals/formats.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Journal
        Articles</span></a> <span
        class="sidebar-item-toggle text-start collapsed"
        bs-toggle="collapse" bs-target="#quarto-sidebar-section-3"
        aria-expanded="false" aria-label="Toggle section"></span>

        -   <a href="../../docs/journals/formats.html"
            class="sidebar-item-text sidebar-link"><span class="menu-text">Journal
            Formats</span></a>

        -   <a href="../../docs/journals/templates.html"
            class="sidebar-item-text sidebar-link"><span class="menu-text">Article
            Templates</span></a>

        -   <a href="../../docs/journals/authors.html"
            class="sidebar-item-text sidebar-link"><span class="menu-text">Authors
            &amp; Affiliations</span></a>

    -   <a href="../../docs/extensions/formats.html"
        class="sidebar-item-text sidebar-link active"><span
        class="menu-text">Custom Formats</span></a>

    -   <a href="../../docs/extensions/revealjs.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Revealjs
        Plugins</span></a>

    -   <a href="../../docs/extensions/project-types.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Project
        Types</span></a>

    -   <a href="../../docs/extensions/starter-templates.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Starter
        Templates</span></a>

## On this page

-   <a href="#overview" id="toc-overview" class="nav-link active"
    data-scroll-target="#overview">Overview</a>
-   <a href="#quick-start" id="toc-quick-start" class="nav-link"
    data-scroll-target="#quick-start">Quick Start</a>
-   <a href="#example-revealjs" id="toc-example-revealjs" class="nav-link"
    data-scroll-target="#example-revealjs">Example: Revealjs</a>
-   <a href="#format-templates" id="toc-format-templates" class="nav-link"
    data-scroll-target="#format-templates">Format Templates</a>
-   <a href="#distributing-formats" id="toc-distributing-formats"
    class="nav-link" data-scroll-target="#distributing-formats">Distributing
    Formats</a>
-   <a href="#common-metadata" id="toc-common-metadata" class="nav-link"
    data-scroll-target="#common-metadata">Common Metadata</a>
-   <a href="#format-resources" id="toc-format-resources" class="nav-link"
    data-scroll-target="#format-resources">Format Resources</a>
-   <a href="#extension-embedding" id="toc-extension-embedding"
    class="nav-link" data-scroll-target="#extension-embedding">Extension
    Embedding</a>

-   <a
    href="https://github.com/quarto-dev/quarto-web/edit/main/docs/extensions/formats.qmd"
    class="toc-action"><em></em>Edit this page</a>
-   <a href="https://github.com/quarto-dev/quarto-cli/issues/new/choose"
    class="toc-action"><em></em>Report an issue</a>

1.  [Creating Extensions](../../docs/extensions/creating.html)
2.  [Custom Formats](../../docs/extensions/formats.html)

# Custom Formats

## Overview

Quarto format extensions enable you to add new formats to the built-in
formats (e.g. `html`, `pdf`, `docx`) already available. Custom formats
can provide default document options, style-sheets, header, footer, or
logo elements, and even bundle other extensions like
[filters](../../docs/extensions/filters.html) and
[shortcodes](../../docs/extensions/shortcodes.html). They are a great
way to provide a common baseline for authoring documents or
presentations within an organization, for a particular type of project
or analysis, or for a specific publication.

You can specify a custom format beneath the `format` key just like a
built-in format. For example:

    ---
    title: "My Document"
    format:
       acm-pdf: 
         toc: true
    ---

Custom formats all derive from one of the base formats, and include that
base format as a suffix. Formats can also provide multiple variations
that derive from distinct base formats. For example:

    ---
    title: "My Document"
    toc: true
    format:
       acm-pdf: default
       acm-html: default
    ---

Note that we moved the `toc` option to the top level since it is shared
between both of the formats.

Custom formats can also be used with the `--to` argument to
`quarto render`. For example:

    Terminal

    quarto render document.qmd --to acm-html

Note that if you are specifically interested in using or creating custom
formats for journals and manuscripts, you may want to proceed instead to
the documentation on [Journal Articles](../../docs/journals/index.html).

## Quick Start

Here we’ll describe how to create a simple HTML-based format extension.
We’ll use the `quarto create` command to do this. If you are using VS
Code or RStudio you should execute `quarto create` within their
repsective integrated Terminal panes.

To get started, execute `quarto create extension format:html` within the
parent directory where you’d like the format to be created:

    Terminal

    $ quarto create extension format:html
     ? Extension Name › lexdoc

As shown above, you’ll be prompted for an extension name. Type `lexdoc`
(a document format for a fictional company named LexCrop) and press
Enter—the custom format extension is then created:

    Creating extension at /Users/jjallaire/quarto/dev/lexdoc:
      - Created README.md
      - Created _extensions/lexdoc/custom.scss
      - Created _extensions/lexdoc/_extension.yml
      - Created template.qmd

If you are running within VS Code or RStudio a new window will open with
the extension project.

Note that this example creates a format that is derivative of the Quarto
base `html` format. You can similarly create formats that are derivative
of `pdf`, `docx`, and `revealjs` as follows:

    Terminal

    quarto create extension format:pdf
    quarto create extension format:docx
    quarto create extension format:revealjs

Here’s what the contents of the files in `_extensions/lexdoc/` look
like:

    _extensions/lexdoc/_extension.yml

    title: Lexdoc
    author: J.J. Allaire
    version: 1.0.0
    quarto-required: ">=1.2.222"
    contributes:
      formats:
        html:
          toc: true
          theme: [yeti, custom.scss]

The custom HTML format defined here is very simple. It takes the base
`html` format, turns on the table of contents by default, and sets the
theme as `yeti` along with a `custom.scss` file for additional
customizations:

    _extensions/lexdoc/custom.css

    /*-- scss:defaults --*/

    /* TODO: Customize appearance with SCSS variables */
    /* See https://quarto.org/docs/output-formats/html-themes.html#theme-options */

    /*-- scss:rules --*/

    /* TODO: Provide custom CSS rules */

Finally, the `template.qmd` provides a base example article for users of
the format:

    template.qmd

    ---
    title: "Lexdoc Example"
    format:
      lexdoc-html: default
    author: J.J. Allaire
    date: last-modified
    ---

    ## Introduction

    *TODO* Create an example file that demonstrates the formatting and features of your format.

    ## More Information

    You can learn more about controlling the appearance of HTML output here: <https://quarto.org/docs/output-formats/html-basics.html>

To develop your format, render/preview `template.qmd`, and then make
changes to the various files in the `_extensions` directory (the preview
will automatically refresh when you change these files).

## Example: Revealjs

Next, we’ll walk through the creation of a custom format that extends
the `revealjs` presentation format. Here is what the source code
repository of the format extension might look like:

    README.md
    LICENSE
    template.qmd
    _extensions/
      lexconf/
        _extension.yml
        theme.scss
        logo.png
        title.png

Note that the format suffix (`revealjs`) is excluded from the directory
name (this is to account for the possibility of multiple formats
e.g. `lexconf-revealjs`, `lexconf-pptx`, etc.)

As with other types of extensions, the only thing strictly required is
the `_extensions` directory (anything above that is for your own
purposes and is ignored during format installation). Even so, it’s good
practice to include a `README.md` and `LICENSE` file. The `template.qmd`
file serves a couple of purposes:

1.  It can be rendered as you develop your format to ensure that things
    work as expected.
2.  It can serve as the basis for a format template (which helps users
    gets started with using your format).

Here is what the contents of `_extension.yml` might look like:

    title: LexConf 2022 Presentation
    author: LexCorp
    version: 1.0.0
    quarto-required: ">=1.2.0"
    contributes:
      formats:
        revealjs:
           theme: [default, theme.scss]
           logo: logo.png
           footer: | 
             Copyright 2022 (c) LexCorp, Inc.
           title-slide-attributes:
              data-background-image: title.png
              data-background-size: contain
           preview-links: auto
           

This format mostly provides organization-level content and theming. As
mentioned above, formats can also include filters which allow for adding
custom markdown constructs and rendering behavior.

Here is what the contents of `template.qmd` might look like:

    ---
    title: "Presentation"
    subtitle: "LexConf 2022"
    author: "Your Name"
    date: today
    format: lexconf-revealjs
    ---

    # Overview

Extension repositories are structured in such a way that you can test
your extension and the template by simply rendering the `template.qmd`
file right in the root of your repository. The `template.qmd` will be
able to load your extension just as it would when installed, so testing
and iterating should be as simple as working within your extension
directory until you’re satisfied (without the need to repeatedly install
or update the extension in order to test it).

## Format Templates

Above we described including a `template.qmd` alongside your extension
and then installing the template and format together with:

    Terminal

    quarto use template <gh-organization>/<extension>

The `template.qmd` should demonstrate the functionality of the format
and serve as a sound starting point for the user. When the extension
template is copied into the target directory, the `template.qmd` will
automatically be renamed to match the name that the user provided for
the directory.

You can also include other files alongside `template.qmd` and they will
be copied as well. Note that by default, Quarto will exclude common
Github repository files when copying an extension template. This
includes any file name or directory starting with a `.`
(e.g. `.gitignore`), `README.md`, `LICENSE`, etc.. If you’d like, you
can place a `.quartoignore` file in the root of your repository with
each line of the file being a glob describing file(s) to ignore (using
syntax like a `.gitignore` file).

## Distributing Formats

You can distribute format extensions in one of two ways:

1.  As a template that includes both the format in the `_extensions`
    directory and the `template.qmd` (which is automatically renamed to
    match the name of the enclosing directory).

2.  As a plain format with no template scaffolding (this is useful for
    adding the format to an existing document or project).

If you have a GitHub repository containing the files enumerated above in
the `lexconf` example, users could install your extension and associated
template as follows (where `lexcorp` is the GitHub organization hosting
the repo):

    Terminal

    quarto use template lexcorp/lexconf

This is often the preferred way to get started with a format as it
provides the user with a working document right out of the box. It’s
also possible to install *only* the format if you are working with an
existing project:

    Terminal

    quarto add lexcorp/lexconf

Note that it is possible to bundle and distribute extensions as simple
gzip archives (as opposed to using a GitHub repository as described
above). See the article on [Distributing
Extensions](../../docs/extensions/distributing.html) for additional
details.

## Common Metadata

If you have metadata that is common to any output format when your
format extension is targeted, you can place that metadata under the
`common` key. For example:

    contributes:
      format:
        common:
          filters:
            - filter.lua
          shortcodes:
            - quarto-ext/fancy-text
        html:
          # html-specifc
        pdf:
          # pdf-specifc

## Format Resources

You can usually include other files and resources within a format
extension by placing those files within the extension directory and
using relative paths to reference them in your `_extension.yml` metadata
file. These relative paths will be properly handled as your extension’s
metadata is merged with the rendered document metadata.

If there are resources that you need to have copied to the input
directory as a part of rendering the document (for example, a `bst` file
for LaTeX bibliographies or a logo or other file referenced from a LaTeX
template), you can provide `format-resources`, which is a list of file
paths<a href="#fn1" id="fnref1" class="footnote-ref"
role="doc-noteref"><sup>1</sup></a>. Each of these files will be copied
into the directory containing the input that is being rendered when the
document is rendered. For example:

    contributes:
      format:
        pdf:
          format-resources:
            - plos2015.bst

## Extension Embedding

In some cases format extensions will want to make use of other
extensions. This is permitted, but adding extensions for use within a
custom format must be done with a special command line flag to ensure
they are embedded correctly.

    Terminal

    quarto create extension format:pdf myformat
    cd myformat
    quarto add quarto-ext/fancy-text --embed myformat

For example, here we want to make the
[fancy-text](https://github.com/quarto-ext/fancy-text) extension (which
provides special formatting for the words <span
class="math inline">\\(\LaTeX\\)</span> and <span
class="smallcaps">Bib</span><span
style="letter-spacing:-2px;">T</span><sub>E</sub>X) available for users
of the [jss](https://github.com/quarto-journals/jss) custom format:

    Terminal

    quarto add quarto-ext/fancy-text --embed jss

This will produce the following output:

    Output

    quarto-journals/jss
    └── _extensions
        └── jss
            ├── _extensions
            │   └── quarto-ext
            │       └── fancy-text
            └── partials

This will add the `quarto-ext/fancy-text` extension into the `jss`
extension in the `_extensions` folder. By embedding an extension you
make it available without creating the potential for conflict with other
versions of the extension that users might already have installed.

## Footnotes

1.  This is most common in the the case of PDF based formats which have
    a secondary step of converting the LaTeX produced by Pandoc into a
    PDF. If there are files that are referenced indirectly by the LaTeX,
    they will need to be discoverable and should typically be copied
    into the same directory that contains the LaTeX
    input.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a>

<a href="../../docs/journals/authors.html"
class="pagination-link aria-label=" data-authors="" data-&amp;=""
data-affiliations"=""><em></em> <span class="nav-page-text">Authors
&amp; Affiliations</span></a>

<a href="../../docs/extensions/revealjs.html" class="pagination-link"
aria-label="Revealjs Plugins"><span class="nav-page-text">Revealjs
Plugins</span> <em></em></a>

Proudly supported by [<img
src="https://www.rstudio.com/assets/img/posit-logo-fullcolor-TM.svg"
class="img-fluid" width="65" alt="Posit" />](https://posit.co)

-   <a href="../../about.html" class="nav-link"></a>

    About

-   <a href="../../docs/faq/index.html" class="nav-link"></a>

    FAQ

-   <a href="../../license.html" class="nav-link"></a>

    License

-   <a href="../../trademark.html" class="nav-link"></a>

    Trademark

-   <a href="https://twitter.com/quarto_pub" class="nav-link"><em></em></a>
-   <a href="https://github.com/quarto-dev/quarto-cli"
    class="nav-link"><em></em></a>
-   <a href="https://quarto.org/docs/blog/index.xml"
    class="nav-link"><em></em></a>
