<a href="../../index.html" class="navbar-brand navbar-brand-logo"><img
src="../../quarto.png" class="navbar-logo" alt="Quarto logo." /></a>

<span class="navbar-toggler-icon"></span>

-   <a href="../../index.html" class="nav-link"><span
    class="menu-text">Overview</span></a>
-   <a href="../../docs/get-started/index.html" class="nav-link"><span
    class="menu-text">Get Started</span></a>
-   <a href="../../docs/guide/index.html" class="nav-link"><span
    class="menu-text">Guide</span></a>
-   <a href="../../docs/extensions/index.html" class="nav-link active"
    aria-current="page"><span class="menu-text">Extensions</span></a>
-   <a href="../../docs/reference/index.html" class="nav-link"><span
    class="menu-text">Reference</span></a>
-   <a href="../../docs/gallery/index.html" class="nav-link"><span
    class="menu-text">Gallery</span></a>
-   <a href="../../docs/blog/index.html" class="nav-link"><span
    class="menu-text">Blog</span></a>
-   <a href="#" id="nav-menu-help" class="nav-link dropdown-toggle"
    role="button" data-bs-toggle="dropdown" aria-expanded="false"><span
    class="menu-text">Help</span></a>
    -   <a href="https://github.com/quarto-dev/quarto-cli/issues"
        class="dropdown-item"><em></em> <span class="dropdown-text">Report a
        Bug</span></a>
    -   <a href="https://github.com/quarto-dev/quarto-cli/discussions"
        class="dropdown-item"><em></em> <span class="dropdown-text">Ask a
        Question</span></a>
    -   <a href="../../docs/faq/index.html" class="dropdown-item"><em></em>
        <span class="dropdown-text">FAQ</span></a>

<a href="https://twitter.com/quarto_pub"
class="quarto-navigation-tool px-1" aria-label="Quarto Twitter"
title="Quarto Twitter"><em></em></a>
<a href="https://github.com/quarto-dev/quarto-cli"
class="quarto-navigation-tool px-1" aria-label="Quarto GitHub"
title="Quarto GitHub"><em></em></a>
<a href="https://quarto.org/docs/blog/index.xml"
class="quarto-navigation-tool px-1" aria-label="Quarto Blog RSS"
title="Quarto Blog RSS"><em></em></a>

1.  [Creating Extensions](../../docs/extensions/creating.html)
2.  [Lua API Reference](../../docs/extensions/lua-api.html)

<span class="flex-grow-1" role="button" bs-toggle="collapse"
bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar"
aria-expanded="false" aria-label="Toggle sidebar navigation"
onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"></span>

-   

    ------------------------------------------------------------------------

-   <a href="../../docs/extensions/index.html"
    class="sidebar-item-text sidebar-link"><span class="menu-text">Quarto
    Extensions</span></a> <span class="sidebar-item-toggle text-start"
    bs-toggle="collapse" bs-target="#quarto-sidebar-section-1"
    aria-expanded="true" aria-label="Toggle section"></span>

    -   <a href="../../docs/extensions/listing-filters.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Shortcodes &amp; Filters</span></a>

    -   <a href="../../docs/extensions/listing-journals.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Journal
        Articles</span></a>

    -   <a href="../../docs/extensions/listing-formats.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Custom
        Formats</span></a>

    -   <a href="../../docs/extensions/listing-revealjs.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Revealjs
        Extensions</span></a>

    -   <a href="../../docs/extensions/managing.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Managing
        Extensions</span></a>

-   

    ------------------------------------------------------------------------

-   <a href="../../docs/extensions/creating.html"
    class="sidebar-item-text sidebar-link"><span class="menu-text">Creating
    Extensions</span></a> <span class="sidebar-item-toggle text-start"
    bs-toggle="collapse" bs-target="#quarto-sidebar-section-2"
    aria-expanded="true" aria-label="Toggle section"></span>

    -   <a href="../../docs/extensions/creating.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Overview</span></a>

    -   <a href="../../docs/extensions/lua.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Lua
        Development</span></a>

    -   <a href="../../docs/extensions/lua-api.html"
        class="sidebar-item-text sidebar-link active"><span
        class="menu-text">Lua API Reference</span></a>

    -   <a href="../../docs/extensions/distributing.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Distribution</span></a>

    -   

        ------------------------------------------------------------------------

    -   <a href="../../docs/extensions/shortcodes.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Shortcodes</span></a>

    -   <a href="../../docs/extensions/filters.html"
        class="sidebar-item-text sidebar-link"><span
        class="menu-text">Filters</span></a>

    -   <a href="../../docs/journals/formats.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Journal
        Articles</span></a> <span
        class="sidebar-item-toggle text-start collapsed"
        bs-toggle="collapse" bs-target="#quarto-sidebar-section-3"
        aria-expanded="false" aria-label="Toggle section"></span>

        -   <a href="../../docs/journals/formats.html"
            class="sidebar-item-text sidebar-link"><span class="menu-text">Journal
            Formats</span></a>

        -   <a href="../../docs/journals/templates.html"
            class="sidebar-item-text sidebar-link"><span class="menu-text">Article
            Templates</span></a>

        -   <a href="../../docs/journals/authors.html"
            class="sidebar-item-text sidebar-link"><span class="menu-text">Authors
            &amp; Affiliations</span></a>

    -   <a href="../../docs/extensions/formats.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Custom
        Formats</span></a>

    -   <a href="../../docs/extensions/revealjs.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Revealjs
        Plugins</span></a>

    -   <a href="../../docs/extensions/project-types.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Project
        Types</span></a>

    -   <a href="../../docs/extensions/starter-templates.html"
        class="sidebar-item-text sidebar-link"><span class="menu-text">Starter
        Templates</span></a>

## On this page

-   <a href="#overview" id="toc-overview" class="nav-link active"
    data-scroll-target="#overview">Overview</a>
-   <a href="#lua-base-api" id="toc-lua-base-api" class="nav-link"
    data-scroll-target="#lua-base-api">Lua Base API</a>
-   <a href="#pandoc-lua-api" id="toc-pandoc-lua-api" class="nav-link"
    data-scroll-target="#pandoc-lua-api">Pandoc Lua API</a>
-   <a href="#quarto-lua-api" id="toc-quarto-lua-api" class="nav-link"
    data-scroll-target="#quarto-lua-api">Quarto Lua API</a>
    -   <a href="#utility-functions" id="toc-utility-functions" class="nav-link"
        data-scroll-target="#utility-functions">Utility Functions</a>
    -   <a href="#format-detection" id="toc-format-detection" class="nav-link"
        data-scroll-target="#format-detection">Format Detection</a>
    -   <a href="#includes" id="toc-includes" class="nav-link"
        data-scroll-target="#includes">Includes</a>
    -   <a href="#dependencies" id="toc-dependencies" class="nav-link"
        data-scroll-target="#dependencies">Dependencies</a>
    -   <a href="#json-encoding" id="toc-json-encoding" class="nav-link"
        data-scroll-target="#json-encoding">JSON Encoding</a>
    -   <a href="#base64-encoding" id="toc-base64-encoding" class="nav-link"
        data-scroll-target="#base64-encoding">Base64 Encoding</a>

-   <a
    href="https://github.com/quarto-dev/quarto-web/edit/main/docs/extensions/lua-api.qmd"
    class="toc-action"><em></em>Edit this page</a>
-   <a href="https://github.com/quarto-dev/quarto-cli/issues/new/choose"
    class="toc-action"><em></em>Report an issue</a>

1.  [Creating Extensions](../../docs/extensions/creating.html)
2.  [Lua API Reference](../../docs/extensions/lua-api.html)

# Lua API Reference

## Overview

This article provides documentation on the standard APIs available when
implementing Lua filters and shortcodes. There are three major sets of
APIs available:

-   **Lua Base API**—Base functions provided for string handling,
    pattern matching, table manipulation, and file input and output.

-   **Pandoc Lua API**—Core API provided by Pandoc for filter
    development, and includes both core AST types (e.g. `pandoc.Div`,
    `pandoc.CodeBlock`, etc.) as well as a wide variety of helper
    functions for common tasks.

-   **Quarto Lua API**—Additional functions used for debugging, format
    detection, encoding (e.g. JSON), and adding dependencies to
    documents (e.g. JavaScript libraries or LaTeX packages).

To get started with programming in Lua and learn about some recommended
tools and workflow, see the article on [Lua
Development](../../docs/extensions/lua.html).

## Lua Base API

The Lua standard library provides core functions for low-level string,
math, table, and file operations. Here we provide links to a few of the
more useful standard libaries (complete documentation can be found in
the [Lua Reference Manual](https://www.lua.org/manual/5.3/)).

<table class="table">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header header">
<th>Library</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><a
href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></td>
<td>This library provides generic functions for string manipulation,
such as finding and extracting substrings, and pattern matching.</td>
</tr>
<tr class="even even">
<td><a
href="https://www.lua.org/manual/5.3/manual.html#6.5">utf8</a></td>
<td>This library provides basic support for UTF-8 encoding.</td>
</tr>
<tr class="odd odd">
<td><a
href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></td>
<td>This library provides generic functions for table manipulation.</td>
</tr>
<tr class="even even">
<td><a
href="https://www.lua.org/manual/5.3/manual.html#6.7">math</a></td>
<td>This library provides basic mathematical functions.</td>
</tr>
<tr class="odd odd">
<td><a href="https://www.lua.org/manual/5.3/manual.html#6.8">io</a>, <a
href="https://www.lua.org/manual/5.3/manual.html#6.8">file</a></td>
<td>The I/O library provides two different styles for file manipulation:
one uses implicit file handles and the other explicit handles.</td>
</tr>
<tr class="even even">
<td><a href="https://www.lua.org/manual/5.3/manual.html#6.9">os</a></td>
<td>Date/time, locales, environment variables, etc.</td>
</tr>
</tbody>
</table>

## Pandoc Lua API

Complete documentation for the Pandoc Lua API can be found in the [Lua
Filters](https://pandoc.org/lua-filters.html) article available on the
Pandoc website. Here are the various components of the API along with
links to their reference documentation:

<table class="table">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header header">
<th>Lua Module</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><a
href="https://pandoc.org/lua-filters.html#module-pandoc">pandoc</a>
(ast)</td>
<td>Constructors for document tree elements
(e.g. <code>pandoc.Div()</code>, <code>pandoc.Strong()</code>, etc.) as
well as core components (e.g. <code>pandoc.Attr()</code>)</td>
</tr>
<tr class="even even">
<td><a
href="https://pandoc.org/lua-filters.html#helper-functions">pandoc</a>
(functions)</td>
<td>Functions to parse text in a given format, filter and modify a
sub-tree, and run child processes.</td>
</tr>
<tr class="odd odd">
<td><a
href="https://pandoc.org/lua-filters.html#module-text">pandoc.text</a></td>
<td>UTF-8 aware text manipulation functions (e.g. <code>upper()</code>,
<code>lower()</code>, etc.)</td>
</tr>
<tr class="even even">
<td><a
href="https://pandoc.org/lua-filters.html#module-pandoc.list">pandoc.List</a></td>
<td>This module defines pandoc’s list type. It comes with useful methods
and convenience function (e.g <code>find_if()</code>,
<code>includes()</code>, <code>filter()</code>, <code>map()</code>,
etc.)</td>
</tr>
<tr class="odd odd">
<td><a
href="https://pandoc.org/lua-filters.html#module-pandoc.utils">pandoc.utils</a></td>
<td>Internal pandoc functions and utility functions
(e.g. <code>blocks_to_inlines()</code>, <code>stringify()</code>,
<code>citeproc()</code>, etc.)</td>
</tr>
<tr class="even even">
<td><a
href="https://pandoc.org/lua-filters.html#module-pandoc.path">pandoc.path</a></td>
<td>Module for file path manipulations (e.g. <code>is_absolute()</code>,
<code>is_relative()</code>, <code>join()</code>, etc.</td>
</tr>
<tr class="odd odd">
<td><a
href="https://pandoc.org/lua-filters.html#module-pandoc.system">pandoc.system</a></td>
<td>Access to system information and functionality
(e.g. <code>get_working_directory()</code>,
<code>list_directory()</code>, etc.</td>
</tr>
<tr class="even even">
<td><a
href="https://pandoc.org/lua-filters.html#module-pandoc.mediabag">pandoc.mediabag</a></td>
<td>Access to pandoc’s media storage. The “media bag” is used when
pandoc is called with the <code>--extract-media</code> or (for HTML
only) <code>--embed-resources</code> option.</td>
</tr>
<tr class="odd odd">
<td><a
href="https://pandoc.org/lua-filters.html#module-pandoc.template">pandoc.template</a></td>
<td>Compile and access defualt pandoc templates
(e.g. <code>compile()</code>)</td>
</tr>
<tr class="even even">
<td><a
href="https://pandoc.org/lua-filters.html#module-pandoc.types">pandoc.types</a></td>
<td>Constructors for types which are not part of the pandoc AST
(e.g. <code>Version()</code>)</td>
</tr>
</tbody>
</table>

## Quarto Lua API

### Utility Functions

Various utility functions are provided:

<table class="table" style="width:99%;">
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>quarto.version()</code></td>
<td>Return the current Quarto version as a <code>pandoc.Version</code>
object.</td>
</tr>
<tr class="even even">
<td><code>quarto.utils.dump(obj)</code></td>
<td>Dump a text representation of the passed object to stdout.</td>
</tr>
<tr class="odd odd">
<td><code>quarto.utils.resolve_path(path)</code></td>
<td>Compute the full path to a file that is installed alongside your
extension’s Lua script. This is useful for <em>internal</em> resources
that your filter needs but should not be visible to the user.</td>
</tr>
</tbody>
</table>

Quarto includes the
[pandoc-lua-logging](https://github.com/wlupton/pandoc-lua-logging)
library, which should be used in preference to the dump function. For
example, you can examine an element passed to a filter function as
follows:

    function Div(el)
      quarto.log.output(el)
    end

### Format Detection

Extensions will often need to detect the current format to create custom
content depending on the target output medium. The
`quarto.doc.is_format()` function

<table class="table">
<thead>
<tr class="header header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>quarto.doc.is_format(name)</code></td>
<td>Detect if the current format matches <code>name</code>.</td>
</tr>
<tr class="even even">
<td><code>quarto.doc.has_bootstrap()</code></td>
<td>Query whether <a href="https://getbootstrap.com/">Bootstrap CSS</a>
is available within the current document (it is by default for standard
<code>html</code> documents but this may have been overridden by
e.g. <code>theme: none</code>).</td>
</tr>
</tbody>
</table>

The `name` parameter can match an exact Pandoc format name (e.g. `docx`,
`latex`, etc. or can match based on an alias that groups commonly
targeted formats together. The following values format aliases are
handled specially by `quarto.doc.is_format()`:

<table class="table">
<thead>
<tr class="header header">
<th>Alias</th>
<th>Formats</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>latex</code></td>
<td><code>latex</code>, <code>pdf</code></td>
</tr>
<tr class="even even">
<td><code>pdf</code></td>
<td><code>latex</code>, <code>pdf</code></td>
</tr>
<tr class="odd odd">
<td><code>epub</code></td>
<td><code>epub*</code></td>
</tr>
<tr class="even even">
<td><code>html</code></td>
<td><code>html*</code>, <code>epub*</code>, <code>revealjs</code></td>
</tr>
<tr class="odd odd">
<td><code>html:js</code></td>
<td><code>html*</code>, <code>revealjs</code></td>
</tr>
<tr class="even even">
<td><code>markdown</code></td>
<td><code>markdown*</code>, <code>commonmark*</code>, <code>gfm</code>,
<code>markua</code></td>
</tr>
</tbody>
</table>

Note that the `html:js` alias indicates that the target format is
capable of executing JavaScript (this maps to all HTML formats save for
ePub).

For example, here we check for PDF and HTML output:

    if quarto.doc.is_format("pdf") then
      -- pdf specific output
    elseif quarto.doc.is_format("html") then
      -- html specific output
    else
      -- output for other formats
    end

For LaTeX output, you may need to additionally detect which citation
utility and pdf engine are being used for the current render. You can
use these functions to do that detection:

<table class="table" style="width:99%;">
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>quarto.doc.cite_method()</code></td>
<td>Returns a string (<code>citeproc</code>, <code>natbib</code>, or
<code>biblatex)</code> indicating the cite method in use.</td>
</tr>
<tr class="even even">
<td><code>quarto.doc.pdf_engine()</code></td>
<td>Returns a string (<code>pdflatex</code>, <code>xelatex</code>,
<code>lualatex</code>, or <code>tectonic</code>) indicating the PDF
engine being used to render the document.</td>
</tr>
</tbody>
</table>

### Includes

Sometimes extensions need to inject content into the target document.
There are three locations that content can be included (pass one of
these locations as the first argument of the include functions):

<table class="table" style="width:99%;">
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header header">
<th>Location</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>in-header</code></td>
<td>In the header of the document (HTML <code>&lt;head&gt;</code> tag or
LaTeX preamble)</td>
</tr>
<tr class="even even">
<td><code>before-body</code></td>
<td>Before the document body</td>
</tr>
<tr class="odd odd">
<td><code>after-body</code></td>
<td>After the document body</td>
</tr>
</tbody>
</table>

Note that the included content should use the *raw target format*
(e.g. HTML or LaTeX) rather than markdown. You can use these functions
to include text or the contents of a file:

<table class="table" style="width:99%;">
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>quarto.doc.include_text(location, text)</code></td>
<td>Include text at the specified location (<code>in-header</code>,
<code>before-body</code>, or <code>after-body</code>)</td>
</tr>
<tr class="even even">
<td><code>quarto.doc.include_file(location, file)</code></td>
<td>Include file at the specified location (<code>in-header</code>,
<code>before-body</code>, or <code>after-body</code>). The path to the
file should <em>relative</em> to the Lua script calling this
function.</td>
</tr>
</tbody>
</table>

For example the following code includes an HTML file after the body in
the rendered document:

    quarto.doc.include_file("after-body", "comments.html")

### Dependencies

Extensions will sometimes want to add external dependencies (for
example, a JavaScript library and related CSS, or the usage of a LaTeX
package). This can be accomplished with the following functions:

<table class="table">
<thead>
<tr class="header header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>quarto.doc.add_html_dependency(dep)</code></td>
<td>Add an HTML dependency (additional resources and content) to a
document. See docs on the <a href="#html-dependencies">HTML
Dependencies</a> below for additional details.</td>
</tr>
<tr class="even even">
<td><code>quarto.doc.attach_to_dependency(name, attach)</code></td>
<td>Attach a file to an existing dependency. <code>attach</code> is a
file path relative to the Lua filter or table with `path` and `name` for
renaming the file as its copied.</td>
</tr>
<tr class="odd odd">
<td><code>quarto.doc.use_latex_package(pkg, opt)</code></td>
<td>Adds a <code>\usepackage</code> statement to the LaTeX output (along
an options string specified in <code>opt</code>)</td>
</tr>
<tr class="even even">
<td><code>quarto.doc.add_format_resource(path)</code></td>
<td>Add a format resource to the document. Format resources will be
copied into the directory next to the rendered output. This is useful,
for example, if your format references a <code>bst</code> or
<code>cls</code> file which must be copied into the LaTeX output
directory.</td>
</tr>
</tbody>
</table>

For example, here we add a LaTeX package dependency:

    quarto.doc.use_latex_package("gamebook")

#### HTML Dependencies

HTML Dependencies can bundle together JavaScript, CSS, and even
arbitrary content to inject into the `<head>` of the document. These
dependencies have a name and a version, which is used to ensure that the
same dependency isn’t bundled into the document more than once.

The `dep` object passed to `quarto.doc.add_html_dependency()` has the
following fields:

<table class="table">
<thead>
<tr class="header header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>name</code></td>
<td>Unique name. Required.</td>
</tr>
<tr class="even even">
<td><code>version</code></td>
<td>Version number (as a string). Required.</td>
</tr>
<tr class="odd odd">
<td><code>scripts</code></td>
<td>List of scripts to include (paths can be absolute or relative to the
Lua file calling the function). Scripts can be either a simple path or a
<a href="#script-object">script object</a>.</td>
</tr>
<tr class="even even">
<td><code>stylesheets</code></td>
<td>List of CSS style-sheets to include (paths can be absolute or
relative to the Lua file calling the function). Stylesheets can either
be a simple path or a <a href="#stylesheet-object">stylesheet
object</a></td>
</tr>
<tr class="odd odd">
<td><code>links</code></td>
<td>List of link tags to add to the document. Each tag should be a table
with <code>rel</code> and <code>ref</code> (required) and optionally
<code>type</code></td>
</tr>
<tr class="even even">
<td><code>resources</code></td>
<td>Additional files to copy to the input directory (each resource is an
object with <code>name</code> (target file name in input directory) and
<code>path</code> (source file name relative to Lua script).</td>
</tr>
<tr class="odd odd">
<td><code>serviceworkers</code></td>
<td>JavaScript serviceworker files that should be copied to the root
output directory (can be a simple string file name or table with `path`
and `name` for renaming the file as its copied).</td>
</tr>
<tr class="even even">
<td><code>meta</code></td>
<td>Table of optional <code>key = value</code> meta tags to insert into
the document <code>&lt;head&gt;</code></td>
</tr>
<tr class="odd odd">
<td><code>head</code></td>
<td>Arbitrary string to include in document
<code>&lt;head&gt;</code></td>
</tr>
</tbody>
</table>

For example, here we add a dependency to a JavaScript library:

    quarto.doc.add_html_dependency({
      name = "glightbox",
      version = "3.2.0",
      scripts = {"glightbox.min.js"},
      stylesheets = {"glightbox.min.css"}
    })

#### Script Object

The easiest way to specify `scripts` is with simple paths. However, in
some cases you may need to add attributes to the `<script>` tag or
specify that the script should go after the body. In those cases pass a
script object:

<table class="table" style="width:99%;">
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>path</code></td>
<td>Path to the script (relative to the calling Lua script)</td>
</tr>
<tr class="even even">
<td><code>attribs</code></td>
<td>Table with <code>key = value</code> attributes to add to the
<code>&lt;script&gt;</code> tag</td>
</tr>
<tr class="odd odd">
<td><code>afterBody</code></td>
<td>Specify that the <code>&lt;script&gt;</code> tag should be inserted
after the body</td>
</tr>
</tbody>
</table>

For example, here update the previous example to add an `integrity`
attribute to the script:

    quarto.doc.add_html_dependency({
      name = "glightbox",
      version = "3.2.0",
      scripts = {
        { path = "glightbox.min.js ", attribs = {integrity = "R9GqQ8K/uxy9rx"} }
      },
      stylesheets = {"glightbox.min.css"}
    })

#### Stylesheet Object

The easiest way to specify `stylesheets` is with simple paths. However,
in some cases you may need to add attributes to the `<link>` tag
generated for the stylesheet. In those cases pass a stylesheet object:

<table class="table" style="width:99%;">
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>path</code></td>
<td>Path to the stylesheet (relative to the calling Lua script)</td>
</tr>
<tr class="even even">
<td><code>attribs</code></td>
<td>Table with <code>key = value</code> attributes to add to the
<code>&lt;link&gt;</code> tag</td>
</tr>
</tbody>
</table>

For example, here we update the previous example to add an `integrity`
attribute to the stylesheet:

    quarto.doc.add_html_dependency({
      name = "glightbox",
      version = "3.2.0",
      scripts = {
        { 
          path = "glightbox.min.js ", 
          attribs = {integrity = "R9GqQ8K/uxy9rx"} 
        }
      },
      stylesheets = {
        { 
          path = "glightbox.min.css ", 
          attribs = {integrity = "GYl1kPzQho1wx"} 
        }
      }
    })

### JSON Encoding

Quarto includes a copy of [json.lua](https://github.com/rxi/json.lua). a
lightweight JSON library for Lua. You can access the JSON functions as
follows:

<table class="table">
<thead>
<tr class="header header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>quarto.json.encode(input)</code></td>
<td>Encode a Lua table into a JSON string.</td>
</tr>
<tr class="even even">
<td><code>quarto.json.decode(str)</code></td>
<td>Parse a JSON string into a Lua table.</td>
</tr>
</tbody>
</table>

For example, here we encode and then decode a table:

    local json = quarto.json.encode({foo = "bar"})
    local obj = quarto.json.decode(json)

### Base64 Encoding

Quarto includes a copy of
[lbase64](https://github.com/iskolbin/lbase64), a pure Lua
implementation of Base64 encoding. You can access the Base 64 encoding
functions as follows:

<table class="table">
<thead>
<tr class="header header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd odd">
<td><code>quarto.base64.encode(str)</code></td>
<td>Encode a string into Base 64.</td>
</tr>
<tr class="even even">
<td><code>quarto.base64.decode(b64str)</code></td>
<td>Decode a Base 64 string.</td>
</tr>
</tbody>
</table>

<a href="../../docs/extensions/lua.html"
class="pagination-link aria-label=" data-lua=""
data-development"=""><em></em> <span class="nav-page-text">Lua
Development</span></a>

<a href="../../docs/extensions/distributing.html"
class="pagination-link" aria-label="Distribution"><span
class="nav-page-text">Distribution</span> <em></em></a>

Proudly supported by [<img
src="https://www.rstudio.com/assets/img/posit-logo-fullcolor-TM.svg"
class="img-fluid" width="65" alt="Posit" />](https://posit.co)

-   <a href="../../about.html" class="nav-link"></a>

    About

-   <a href="../../docs/faq/index.html" class="nav-link"></a>

    FAQ

-   <a href="../../license.html" class="nav-link"></a>

    License

-   <a href="../../trademark.html" class="nav-link"></a>

    Trademark

-   <a href="https://twitter.com/quarto_pub" class="nav-link"><em></em></a>
-   <a href="https://github.com/quarto-dev/quarto-cli"
    class="nav-link"><em></em></a>
-   <a href="https://quarto.org/docs/blog/index.xml"
    class="nav-link"><em></em></a>
